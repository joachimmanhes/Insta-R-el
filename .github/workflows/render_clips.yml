name: Render clips (FFmpeg)

on:
  repository_dispatch:
    types: [render_clips]

jobs:
  render:
    runs-on: ubuntu-latest
    timeout-minutes: 45

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      - name: Install FFmpeg
        run: |
          sudo apt-get update
          sudo apt-get install -y ffmpeg

      - name: Install yt-dlp
        run: |
          pip install yt-dlp requests

      - name: Print payload
        run: |
          echo "Payload received:"
          cat $GITHUB_EVENT_PATH
